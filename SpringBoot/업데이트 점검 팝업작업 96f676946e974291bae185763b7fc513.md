# 업데이트/점검 팝업작업

생성일: 2021년 2월 16일 오후 2:34

TB_ERP_APK_NOTICE : 정기점검
TB_ERP_APK_VERSION_TP : 학부모/교사앱 APK

그냥 

점검 시작 ~ 점검 끝 날짜

점검 내용 

use 여부 

app_type 어떤 앱인지 (다른 앱이랑 같이 씀)

apk_gb 걍 apk라고 넣음

이런 데이터들이 들어간 테이블 생성함

그러고 앱에서 

tiles 에 있는 layout 에 공통 js 로 

처음 시작할때랑 setInterval 으로 30분 간격으로 ajax 날려줌

```jsx
/* 업데이트,점검 */
$(function(){
    var param = {
        "apk_type" : 'TEACHER'
        ,"apk_gb" : 'APK'
    }
    /* 처음 실행 */
    cehck_apk();
    /* 30분간격으로 실행 */
    var time = 1000 * 60 * 30;
    setInterval(function(){
        cehck_apk();
    }, time);

    function cehck_apk(){

        $.ajax({
            type : "POST",
            url : realPath+"/api/v1/check",
            contentType : "application/json",
            dataType : "JSON",
            data : JSON.stringify(param),
            success : function(res) {
                location.href = realPath+"/admin/checkinfo?notice="+res.data.notice_desc;
            }
        });
    }
});
```

이렇게 날려서 데이터 있으면 팝업 창으로 보냄 

확인누르면 브릿지 보내서 앱 다운시키면 됨

업데이트도 비슷한데 처음 시작할때랑 30분간격으로 보내주는것 체크를 안드에서 함