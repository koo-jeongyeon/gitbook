# 파일업로드

생성일: 2021년 3월 26일 오후 2:05

pom.xml

```xml
<!-- file-upload -->                 
<dependency>                          
<groupId>commons-io</groupId>                          
<artifactId>commons-io</artifactId>                          
<version>2.0.1</version>                  
</dependency>                  
<dependency>                          
<groupId>commons-fileupload</groupId>                          
<artifactId>commons-fileupload</artifactId>                          
<version>1.2.2</version>                  
</dependency>
```

common.xml

```xml
<!-- MultipartResolver 설정 -->          
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">              
<property name="maxUploadSize" value="100000000" />              
<property name="maxInMemorySize" value="100000000" />          </bean>
```

jsp

```xml
<form name="fileForm" method="post" enctype="multipart/form-data" action="/fiboost/editProfile.do">
    <input type="file" id="file" name="file" style="display:none;"/> 
</form>
```

controller

```java
@RequestMapping(value="/editProfile.do")         
public String editProfile(MultipartHttpServletRequest mre){                 
	MultipartFile mf = mre.getFile("file");                 
String path = "C:/upload/fiboost/";                 
File file = new File(path);         
if(!file.exists()) {
      file.mkdirs();         
}         
if(!mf.isEmpty()){                
String filename = mre.getFile("file").getOriginalFilename();                 
String saveNm = UUID.randomUUID().toString().replaceAll("-", "") + filename.substring(filename.lastIndexOf("."));                 
	try {                         
		mf.transferTo(new File(path+saveNm));                         
	} catch (Exception e) {                                 
		e.printStackTrace();                         
	}         
}                 
return "redirect:/profile.do";                         
}
```

server.xml

```xml
<Context docBase="C://upload/" path="/filePath" reloadable="true"/>
```